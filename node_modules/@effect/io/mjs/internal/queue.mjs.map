{"version":3,"file":"queue.mjs","names":["Chunk","dual","MutableQueue","MutableRef","Option","pipeArguments","ReadonlyArray","core","fiberRuntime","EnqueueSymbolKey","EnqueueTypeId","Symbol","for","DequeueSymbolKey","DequeueTypeId","QueueStrategySymbolKey","QueueStrategyTypeId","queueStrategyVariance","_A","_","enqueueVariance","_In","dequeueVariance","_Out","QueueImpl","constructor","queue","takers","shutdownHook","shutdownFlag","strategy","_a","_b","pipe","arguments","capacity","size","suspend","catchAll","unsafeSize","interrupt","get","none","some","length","surplusSize","isEmpty","map","isFull","shutdown","uninterruptible","withFiberRuntime","state","set","asUnit","whenEffect","deferredSucceed","zipRight","forEachParUnboundedDiscard","unsafePollAll","d","deferredInterruptWith","id","isShutdown","sync","awaitShutdown","deferredAwait","isActive","unsafeOffer","value","noRemaining","taker","poll","EmptyMutableQueue","unsafeCompleteDeferred","succeeded","offer","unsafeCompleteTakers","succeed","handleSurplus","offerAll","iterable","values","fromIterable","pTakers","unsafePollN","empty","forTakers","remaining","splitAt","i","item","surplus","take","unsafeOnQueueEmptySpace","deferred","deferredUnsafeMake","onInterrupt","unsafeRemove","takeAll","pollUpTo","Number","POSITIVE_INFINITY","takeUpTo","max","takeBetween","min","takeRemainderLoop","self","acc","flatMap","bs","b","append","appendAll","isQueue","u","isEnqueue","isDequeue","bounded","requestedCapacity","make","backingQueueFromMutableQueue","backPressureStrategy","dropping","droppingStrategy","sliding","slidingStrategy","unbounded","unsafeMake","deferredMake","BackingQueueFromMutableQueue","mutable","def","limit","elements","element","head","takeN","n","BackPressureStrategy","DroppingStrategy","SlidingStrategy","_c","putters","fiberId","isLastItem","unit","keepPolling","putter","offered","unsafeOfferAll","prepend","iterator","next","done","filter","_d","_iterable","_queue","_takers","_isShutdown","_e","offering","a","deferredUnsafeDone","as"],"sources":["../../src/internal/queue.ts"],"sourcesContent":[null],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,oBAAoB;AAC3C,SAASC,IAAI,QAAc,uBAAuB;AAClD,OAAO,KAAKC,YAAY,MAAM,2BAA2B;AACzD,OAAO,KAAKC,UAAU,MAAM,yBAAyB;AACrD,OAAO,KAAKC,MAAM,MAAM,qBAAqB;AAC7C,SAASC,aAAa,QAAQ,uBAAuB;AACrD,OAAO,KAAKC,aAAa,MAAM,4BAA4B;AAG3D,OAAO,KAAKC,IAAI,MAAM,0BAA0B;AAChD,OAAO,KAAKC,YAAY,MAAM,kCAAkC;AAGhE;AACA,MAAMC,gBAAgB,GAAG,yBAAyB;AAElD;AACA,OAAO,MAAMC,aAAa,gBAAwBC,MAAM,CAACC,GAAG,CAACH,gBAAgB,CAAwB;AAErG;AACA,MAAMI,gBAAgB,GAAG,yBAAyB;AAElD;AACA,OAAO,MAAMC,aAAa,gBAAwBH,MAAM,CAACC,GAAG,CAACC,gBAAgB,CAAwB;AAErG;AACA,MAAME,sBAAsB,GAAG,0BAA0B;AAEzD;AACA,OAAO,MAAMC,mBAAmB,gBAA8BL,MAAM,CAACC,GAAG,CACtEG,sBAAsB,CACM;AAE9B;AACA,MAAME,qBAAqB,GAAG;EAC5BC,EAAE,EAAGC,CAAQ,IAAKA;CACnB;AAED;AACA,OAAO,MAAMC,eAAe,GAAG;EAC7BC,GAAG,EAAGF,CAAU,IAAKA;CACtB;AAED;AACA,OAAO,MAAMG,eAAe,GAAG;EAC7BC,IAAI,EAAGJ,CAAQ,IAAKA;CACrB;AAED;AACA,MAAMK,SAAS;EAIbC,YAAA,CACE;EACSC,KAA4B,EACrC;EACSC,MAA8D,EACvE;EACSC,YAA4C,EACrD;EACSC,YAA4C,EACrD;EACSC,QAA2B;IAR3B,KAAAJ,KAAK,GAALA,KAAK;IAEL,KAAAC,MAAM,GAANA,MAAM;IAEN,KAAAC,YAAY,GAAZA,YAAY;IAEZ,KAAAC,YAAY,GAAZA,YAAY;IAEZ,KAAAC,QAAQ,GAARA,QAAQ;IAbV,KAAAC,EAAA,CAAe,GAAGX,eAAe;IACjC,KAAAY,EAAA,CAAe,GAAGV,eAAe;EAc1C;EAEAW,IAAIA,CAAA;IACF,OAAO5B,aAAa,CAAC,IAAI,EAAE6B,SAAS,CAAC;EACvC;EAEAC,QAAQA,CAAA;IACN,OAAO,IAAI,CAACT,KAAK,CAACS,QAAQ,EAAE;EAC9B;EAEAC,IAAIA,CAAA;IACF,OAAO7B,IAAI,CAAC8B,OAAO,CAAC,MAAM9B,IAAI,CAAC+B,QAAQ,CAAC,IAAI,CAACC,UAAU,EAAE,EAAE,MAAMhC,IAAI,CAACiC,SAAS,CAAC,CAAC;EACnF;EAEAD,UAAUA,CAAA;IACR,IAAIpC,UAAU,CAACsC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,EAAE;MACrC,OAAOzB,MAAM,CAACsC,IAAI,EAAU;;IAE9B,OAAOtC,MAAM,CAACuC,IAAI,CAChB,IAAI,CAACjB,KAAK,CAACkB,MAAM,EAAE,GACjB1C,YAAY,CAAC0C,MAAM,CAAC,IAAI,CAACjB,MAAM,CAAC,GAChC,IAAI,CAACG,QAAQ,CAACe,WAAW,EAAE,CAC9B;EACH;EAEAC,OAAOA,CAAA;IACL,OAAOvC,IAAI,CAACwC,GAAG,CAAC,IAAI,CAACX,IAAI,EAAE,EAAGA,IAAI,IAAKA,IAAI,IAAI,CAAC,CAAC;EACnD;EAEAY,MAAMA,CAAA;IACJ,OAAOzC,IAAI,CAACwC,GAAG,CAAC,IAAI,CAACX,IAAI,EAAE,EAAGA,IAAI,IAAKA,IAAI,IAAI,IAAI,CAACD,QAAQ,EAAE,CAAC;EACjE;EAEAc,QAAQA,CAAA;IACN,OAAO1C,IAAI,CAAC2C,eAAe,CACzB3C,IAAI,CAAC4C,gBAAgB,CAAsBC,KAAK,IAAI;MAC1BjD,UAAU,CAACkD,GAAG,CAAC,IAAI,CAAC,CAAvC,IAAI,CAACxB,YAAY;MACtB,OAQEtB,IAAI,CAAC+C,MAAM,CADX/C,IAAI,CAACgD,UAAU,CAAChD,IAAI,CAACiD,eAAe,CAAC,IAAI,CAAC5B,YAAY,EAAE,KAAK,CAAC,CAAC,CAAC,CADhErB,IAAI,CAACkD,QAAQ,CAAC,IAAI,CAAC3B,QAAQ,CAACmB,QAAQ,EAAE,CAAC,CALvCzC,YAAY,CAACkD,0BAA0B,CACrCC,aAAa,CAAC,IAAI,CAAChC,MAAM,CAAC,EACzBiC,CAAC,IAAKrD,IAAI,CAACsD,qBAAqB,CAACD,CAAC,EAAER,KAAK,CAACU,EAAE,EAAE,CAAC,EAChD,KAAK,CACN;IAKL,CAAC,CAAC,CACH;EACH;EAEAC,UAAUA,CAAA;IACR,OAAOxD,IAAI,CAACyD,IAAI,CAAC,MAAM7D,UAAU,CAACsC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,CAAC;EAC3D;EAEAoC,aAAaA,CAAA;IACX,OAAO1D,IAAI,CAAC2D,aAAa,CAAC,IAAI,CAACtC,YAAY,CAAC;EAC9C;EAEAuC,QAAQA,CAAA;IACN,OAAO,CAAChE,UAAU,CAACsC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC;EAC3C;EAEAuC,WAAWA,CAACC,KAAQ;IAClB,IAAIlE,UAAU,CAACsC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,EAAE;MACrC,OAAO,KAAK;;IAEd,IAAIyC,WAAoB;IACxB,IAAI,IAAI,CAAC5C,KAAK,CAACkB,MAAM,EAAE,KAAK,CAAC,EAAE;MAC7B,MAAM2B,KAAK,GAETrE,YAAY,CAACsE,IAAI,CAACtE,YAAY,CAACuE,iBAAiB,CAAC,CADjD,IAAI,CAAC9C,MAAM,CAEZ;MACD,IAAI4C,KAAK,KAAKrE,YAAY,CAACuE,iBAAiB,EAAE;QAC5CC,sBAAsB,CAACH,KAAK,EAAEF,KAAK,CAAC;QACpCC,WAAW,GAAG,IAAI;OACnB,MAAM;QACLA,WAAW,GAAG,KAAK;;KAEtB,MAAM;MACLA,WAAW,GAAG,KAAK;;IAErB,IAAIA,WAAW,EAAE;MACf,OAAO,IAAI;;IAEb;IACA,MAAMK,SAAS,GAAG,IAAI,CAACjD,KAAK,CAACkD,KAAK,CAACP,KAAK,CAAC;IACzCQ,oBAAoB,CAAC,IAAI,CAAC/C,QAAQ,EAAE,IAAI,CAACJ,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;IAC5D,OAAOgD,SAAS;EAClB;EAEAC,KAAKA,CAACP,KAAQ;IACZ,OAAO9D,IAAI,CAAC8B,OAAO,CAAC,MAAK;MACvB,IAAIlC,UAAU,CAACsC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,EAAE;QACrC,OAAOtB,IAAI,CAACiC,SAAS;;MAEvB,IAAI8B,WAAoB;MACxB,IAAI,IAAI,CAAC5C,KAAK,CAACkB,MAAM,EAAE,KAAK,CAAC,EAAE;QAC7B,MAAM2B,KAAK,GAETrE,YAAY,CAACsE,IAAI,CAACtE,YAAY,CAACuE,iBAAiB,CAAC,CADjD,IAAI,CAAC9C,MAAM,CAEZ;QACD,IAAI4C,KAAK,KAAKrE,YAAY,CAACuE,iBAAiB,EAAE;UAC5CC,sBAAsB,CAACH,KAAK,EAAEF,KAAK,CAAC;UACpCC,WAAW,GAAG,IAAI;SACnB,MAAM;UACLA,WAAW,GAAG,KAAK;;OAEtB,MAAM;QACLA,WAAW,GAAG,KAAK;;MAErB,IAAIA,WAAW,EAAE;QACf,OAAO/D,IAAI,CAACuE,OAAO,CAAC,IAAI,CAAC;;MAE3B;MACA,MAAMH,SAAS,GAAG,IAAI,CAACjD,KAAK,CAACkD,KAAK,CAACP,KAAK,CAAC;MACzCQ,oBAAoB,CAAC,IAAI,CAAC/C,QAAQ,EAAE,IAAI,CAACJ,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;MAC5D,OAAOgD,SAAS,GACZpE,IAAI,CAACuE,OAAO,CAAC,IAAI,CAAC,GAClB,IAAI,CAAChD,QAAQ,CAACiD,aAAa,CAAC,CAACV,KAAK,CAAC,EAAE,IAAI,CAAC3C,KAAK,EAAE,IAAI,CAACC,MAAM,EAAE,IAAI,CAACE,YAAY,CAAC;IACtF,CAAC,CAAC;EACJ;EAEAmD,QAAQA,CAACC,QAAqB;IAC5B,OAAO1E,IAAI,CAAC8B,OAAO,CAAC,MAAK;MACvB,IAAIlC,UAAU,CAACsC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,EAAE;QACrC,OAAOtB,IAAI,CAACiC,SAAS;;MAEvB,MAAM0C,MAAM,GAAG5E,aAAa,CAAC6E,YAAY,CAACF,QAAQ,CAAC;MACnD,MAAMG,OAAO,GAAG,IAAI,CAAC1D,KAAK,CAACkB,MAAM,EAAE,KAAK,CAAC,GACrCtC,aAAa,CAAC6E,YAAY,CAACE,WAAW,CAAC,IAAI,CAAC1D,MAAM,EAAEuD,MAAM,CAACtC,MAAM,CAAC,CAAC,GACnEtC,aAAa,CAACgF,KAAK;MACvB,MAAM,CAACC,SAAS,EAAEC,SAAS,CAAC,GAAgBlF,aAAa,CAACmF,OAAO,CAACL,OAAO,CAACxC,MAAM,CAAC,CAA7CsC,MAAM,CAAwC;MAClF,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,OAAO,CAACxC,MAAM,EAAE8C,CAAC,EAAE,EAAE;QACvC,MAAMnB,KAAK,GAAIa,OAAe,CAACM,CAAC,CAAC;QACjC,MAAMC,IAAI,GAAGJ,SAAS,CAACG,CAAC,CAAC;QACzBhB,sBAAsB,CAACH,KAAK,EAAEoB,IAAI,CAAC;;MAErC,IAAIH,SAAS,CAAC5C,MAAM,KAAK,CAAC,EAAE;QAC1B,OAAOrC,IAAI,CAACuE,OAAO,CAAC,IAAI,CAAC;;MAE3B;MACA,MAAMc,OAAO,GAAG,IAAI,CAAClE,KAAK,CAACsD,QAAQ,CAACQ,SAAS,CAAC;MAC9CX,oBAAoB,CAAC,IAAI,CAAC/C,QAAQ,EAAE,IAAI,CAACJ,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;MAC5D,OAAO3B,KAAK,CAAC8C,OAAO,CAAC8C,OAAO,CAAC,GACzBrF,IAAI,CAACuE,OAAO,CAAC,IAAI,CAAC,GAClB,IAAI,CAAChD,QAAQ,CAACiD,aAAa,CAACa,OAAO,EAAE,IAAI,CAAClE,KAAK,EAAE,IAAI,CAACC,MAAM,EAAE,IAAI,CAACE,YAAY,CAAC;IACtF,CAAC,CAAC;EACJ;EAEAgE,IAAIA,CAAA;IACF,OAAOtF,IAAI,CAAC4C,gBAAgB,CAAmBC,KAAK,IAAI;MACtD,IAAIjD,UAAU,CAACsC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,EAAE;QACrC,OAAOtB,IAAI,CAACiC,SAAS;;MAEvB,MAAMmD,IAAI,GAAG,IAAI,CAACjE,KAAK,CAAC8C,IAAI,CAACtE,YAAY,CAACuE,iBAAiB,CAAC;MAC5D,IAAIkB,IAAI,KAAKzF,YAAY,CAACuE,iBAAiB,EAAE;QAC3C,IAAI,CAAC3C,QAAQ,CAACgE,uBAAuB,CAAC,IAAI,CAACpE,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;QAC9D,OAAOpB,IAAI,CAACuE,OAAO,CAACa,IAAI,CAAC;OAC1B,MAAM;QACL;QACA;QACA;QACA;QACA,MAAMI,QAAQ,GAAGxF,IAAI,CAACyF,kBAAkB,CAAW5C,KAAK,CAACU,EAAE,EAAE,CAAC;QAC9D,OAQEvD,IAAI,CAAC0F,WAAW,CAAC,MAAK;UACpB,OAAO1F,IAAI,CAACyD,IAAI,CAAC,MAAMkC,YAAY,CAAC,IAAI,CAACvE,MAAM,EAAEoE,QAAQ,CAAC,CAAC;QAC7D,CAAC,CAAC,CATFxF,IAAI,CAAC8B,OAAO,CAAC,MAAK;UACEnC,YAAY,CAAC0E,KAAK,CAACmB,QAAQ,CAAC,CAAzC,IAAI,CAACpE,MAAM;UAChBkD,oBAAoB,CAAC,IAAI,CAAC/C,QAAQ,EAAE,IAAI,CAACJ,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;UAC5D,OAAOxB,UAAU,CAACsC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,GACtCtB,IAAI,CAACiC,SAAS,GACdjC,IAAI,CAAC2D,aAAa,CAAC6B,QAAQ,CAAC;QAChC,CAAC,CAAC;;IAMR,CAAC,CAAC;EACJ;EAEAI,OAAOA,CAAA;IACL,OAAO5F,IAAI,CAAC8B,OAAO,CAAC,MAAK;MACvB,OAAOlC,UAAU,CAACsC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,GACpCtB,IAAI,CAACiC,SAAS,GACdjC,IAAI,CAACyD,IAAI,CAAC,MAAK;QACf,MAAMkB,MAAM,GAAG,IAAI,CAACxD,KAAK,CAAC0E,QAAQ,CAACC,MAAM,CAACC,iBAAiB,CAAC;QAC5D,IAAI,CAACxE,QAAQ,CAACgE,uBAAuB,CAAC,IAAI,CAACpE,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;QAC9D,OAAO3B,KAAK,CAACmF,YAAY,CAACD,MAAM,CAAC;MACnC,CAAC,CAAC;IACN,CAAC,CAAC;EACJ;EAEAqB,QAAQA,CAACC,GAAW;IAClB,OAAOjG,IAAI,CAAC8B,OAAO,CAAC,MAClBlC,UAAU,CAACsC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,GAC7BtB,IAAI,CAACiC,SAAS,GACdjC,IAAI,CAACyD,IAAI,CAAC,MAAK;MACf,MAAMkB,MAAM,GAAG,IAAI,CAACxD,KAAK,CAAC0E,QAAQ,CAACI,GAAG,CAAC;MACvC,IAAI,CAAC1E,QAAQ,CAACgE,uBAAuB,CAAC,IAAI,CAACpE,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;MAC9D,OAAO3B,KAAK,CAACmF,YAAY,CAACD,MAAM,CAAC;IACnC,CAAC,CAAC,CACL;EACH;EAEAuB,WAAWA,CAACC,GAAW,EAAEF,GAAW;IAClC,OAAOjG,IAAI,CAAC8B,OAAO,CAAC,MAClBsE,iBAAiB,CACf,IAAI,EACJD,GAAG,EACHF,GAAG,EACHxG,KAAK,CAACsF,KAAK,EAAE,CACd,CACF;EACH;;KArOU5E,aAAa,EAAAsB,EAAA,GACblB,aAAa;AAuOzB;AACA,MAAM6F,iBAAiB,GAAGA,CACxBC,IAAsB,EACtBF,GAAW,EACXF,GAAW,EACXK,GAAmB,KAC4B;EAC/C,IAAIL,GAAG,GAAGE,GAAG,EAAE;IACb,OAAOnG,IAAI,CAACuE,OAAO,CAAC+B,GAAG,CAAC;;EAE1B,OAEEtG,IAAI,CAACuG,OAAO,CAAEC,EAAE,IAAI;IAClB,MAAMvB,SAAS,GAAGkB,GAAG,GAAGK,EAAE,CAACnE,MAAM;IACjC,IAAI4C,SAAS,KAAK,CAAC,EAAE;MACnB,OAEEjF,IAAI,CAACwC,GAAG,CAAEiE,CAAC,IAAoChH,KAAK,CAACiH,MAAM,CAACD,CAAC,CAAC,CAApChH,KAAK,CAACkH,SAAS,CAACH,EAAE,CAAC,CAAxBF,GAAG,EAAuC,CAAC,CADhEhB,IAAI,CAACe,IAAI,CAAC;;IAId,IAAIpB,SAAS,GAAG,CAAC,EAAE;MACjB,OAEEjF,IAAI,CAACuG,OAAO,CAAEE,CAAC,IACbL,iBAAiB,CACfC,IAAI,EACJpB,SAAS,GAAG,CAAC,EACbgB,GAAG,GAAGO,EAAE,CAACnE,MAAM,GAAG,CAAC,EACY5C,KAAK,CAACiH,MAAM,CAACD,CAAC,CAAC,CAApChH,KAAK,CAACkH,SAAS,CAACH,EAAE,CAAC,CAAxBF,GAAG,EAAuC,CAChD,CACF,CARDhB,IAAI,CAACe,IAAI,CAAC;;IAWd,OAAOrG,IAAI,CAACuE,OAAO,CAAW9E,KAAK,CAACkH,SAAS,CAACH,EAAE,CAAC,CAAxBF,GAAG,CAAsB,CAAC;EACrD,CAAC,CAAC,CAvBFN,QAAQ,CAACK,IAAI,EAAEJ,GAAG,CAAC;AAyBvB,CAAC;AAED;AACA,OAAO,MAAMW,OAAO,GAAIC,CAAU,IAAgCC,SAAS,CAACD,CAAC,CAAC,IAAIE,SAAS,CAACF,CAAC,CAAC;AAE9F;AACA,OAAO,MAAMC,SAAS,GAAID,CAAU,IAClC,OAAOA,CAAC,KAAK,QAAQ,IAAIA,CAAC,IAAI,IAAI,IAAI1G,aAAa,IAAI0G,CAAC;AAE1D;AACA,OAAO,MAAME,SAAS,GAAIF,CAAU,IAClC,OAAOA,CAAC,KAAK,QAAQ,IAAIA,CAAC,IAAI,IAAI,IAAItG,aAAa,IAAIsG,CAAC;AAE1D;AACA,OAAO,MAAMG,OAAO,GAAOC,iBAAyB,IAGhDjH,IAAI,CAACuG,OAAO,CAAEpF,KAAK,IAAK+F,IAAI,CAACC,4BAA4B,CAAChG,KAAK,CAAC,EAAEiG,oBAAoB,EAAE,CAAC,CAAC,CAD1FpH,IAAI,CAACyD,IAAI,CAAC,MAAM9D,YAAY,CAACqH,OAAO,CAAIC,iBAAiB,CAAC,CAAC,CAE5D;AAEH;AACA,OAAO,MAAMI,QAAQ,GAAOJ,iBAAyB,IAGjDjH,IAAI,CAACuG,OAAO,CAAEpF,KAAK,IAAK+F,IAAI,CAACC,4BAA4B,CAAChG,KAAK,CAAC,EAAEmG,gBAAgB,EAAE,CAAC,CAAC,CADtFtH,IAAI,CAACyD,IAAI,CAAC,MAAM9D,YAAY,CAACqH,OAAO,CAAIC,iBAAiB,CAAC,CAAC,CAE5D;AAEH;AACA,OAAO,MAAMM,OAAO,GAAON,iBAAyB,IAGhDjH,IAAI,CAACuG,OAAO,CAAEpF,KAAK,IAAK+F,IAAI,CAACC,4BAA4B,CAAChG,KAAK,CAAC,EAAEqG,eAAe,EAAE,CAAC,CAAC,CADrFxH,IAAI,CAACyD,IAAI,CAAC,MAAM9D,YAAY,CAACqH,OAAO,CAAIC,iBAAiB,CAAC,CAAC,CAE5D;AAEH;AACA,OAAO,MAAMQ,SAAS,GAAGA,CAAA,KAGrBzH,IAAI,CAACuG,OAAO,CAAEpF,KAAK,IAAK+F,IAAI,CAACC,4BAA4B,CAAChG,KAAK,CAAC,EAAEmG,gBAAgB,EAAE,CAAC,CAAC,CADtFtH,IAAI,CAACyD,IAAI,CAAC,MAAM9D,YAAY,CAAC8H,SAAS,EAAK,CAAC,CAE7C;AAEH;AACA,MAAMC,UAAU,GAAGA,CACjBvG,KAA4B,EAC5BC,MAA8D,EAC9DC,YAA4C,EAC5CC,YAA4C,EAC5CC,QAA2B,KACT;EAClB,OAAO,IAAIN,SAAS,CAACE,KAAK,EAAEC,MAAM,EAAEC,YAAY,EAAEC,YAAY,EAAEC,QAAQ,CAAC;AAC3E,CAAC;AAED;AACA,OAAO,MAAM2F,IAAI,GAAGA,CAClB/F,KAA4B,EAC5BI,QAA2B,KAIzBvB,IAAI,CAACwC,GAAG,CAAEgD,QAAQ,IAChBkC,UAAU,CACRvG,KAAK,EACLxB,YAAY,CAAC8H,SAAS,EAAE,EACxBjC,QAAQ,EACR5F,UAAU,CAACsH,IAAI,CAAC,KAAK,CAAC,EACtB3F,QAAQ,CACT,CACF,CATDvB,IAAI,CAAC2H,YAAY,EAAe,CAUjC;AAEH;AACA,OAAM,MAAOC,4BAA4B;EACvC1G,YAAqB2G,OAAqC;IAArC,KAAAA,OAAO,GAAPA,OAAO;EAAiC;EAC7D5D,IAAIA,CAAM6D,GAAQ;IAChB,OAAOnI,YAAY,CAACsE,IAAI,CAAC,IAAI,CAAC4D,OAAO,EAAEC,GAAG,CAAC;EAC7C;EACAjC,QAAQA,CAACkC,KAAa;IACpB,OAAOpI,YAAY,CAACkG,QAAQ,CAAC,IAAI,CAACgC,OAAO,EAAEE,KAAK,CAAC;EACnD;EACAtD,QAAQA,CAACuD,QAAqB;IAC5B,OAAOrI,YAAY,CAAC8E,QAAQ,CAAC,IAAI,CAACoD,OAAO,EAAEG,QAAQ,CAAC;EACtD;EACA3D,KAAKA,CAAC4D,OAAU;IACd,OAAOtI,YAAY,CAAC0E,KAAK,CAAC,IAAI,CAACwD,OAAO,EAAEI,OAAO,CAAC;EAClD;EACArG,QAAQA,CAAA;IACN,OAAOjC,YAAY,CAACiC,QAAQ,CAAC,IAAI,CAACiG,OAAO,CAAC;EAC5C;EACAxF,MAAMA,CAAA;IACJ,OAAO1C,YAAY,CAAC0C,MAAM,CAAC,IAAI,CAACwF,OAAO,CAAC;EAC1C;;AAGF;AACA,OAAO,MAAMV,4BAA4B,GAAOU,OAAqC,IACnF,IAAID,4BAA4B,CAACC,OAAO,CAAC;AAE3C;AACA,OAAO,MAAMjG,QAAQ,GAAOyE,IAAyC,IAAaA,IAAI,CAACzE,QAAQ,EAAE;AAEjG;AACA,OAAO,MAAMC,IAAI,GAAOwE,IAAyC,IAA0CA,IAAI,CAACxE,IAAI,EAAE;AAEtH;AACA,OAAO,MAAMY,MAAM,GAAO4D,IAAyC,IACjEA,IAAI,CAAC5D,MAAM,EAAE;AAEf;AACA,OAAO,MAAMF,OAAO,GAAO8D,IAAyC,IAClEA,IAAI,CAAC9D,OAAO,EAAE;AAEhB;AACA,OAAO,MAAMiB,UAAU,GAAO6C,IAAyC,IACrEA,IAAI,CAAC7C,UAAU,EAAE;AAEnB;AACA,OAAO,MAAME,aAAa,GAAO2C,IAAyC,IACxEA,IAAI,CAAC3C,aAAa,EAAE;AAEtB;AACA,OAAO,MAAMhB,QAAQ,GAAO2D,IAAyC,IACnEA,IAAI,CAAC3D,QAAQ,EAAE;AAEjB;AACA,OAAO,MAAM2B,KAAK,gBAAG3E,IAAI,CAGvB,CAAC,EAAE,CAAC2G,IAAI,EAAEvC,KAAK,KAAKuC,IAAI,CAAChC,KAAK,CAACP,KAAK,CAAC,CAAC;AAExC;AACA,OAAO,MAAMD,WAAW,gBAAGnE,IAAI,CAG7B,CAAC,EAAE,CAAC2G,IAAI,EAAEvC,KAAK,KAAKuC,IAAI,CAACxC,WAAW,CAACC,KAAK,CAAC,CAAC;AAE9C;AACA,OAAO,MAAMW,QAAQ,gBAAG/E,IAAI,CAQ1B,CAAC,EAAE,CAAC2G,IAAI,EAAE3B,QAAQ,KAAK2B,IAAI,CAAC5B,QAAQ,CAACC,QAAQ,CAAC,CAAC;AAEjD;AACA,OAAO,MAAMT,IAAI,GAAOoC,IAAsB,IAC5CrG,IAAI,CAACwC,GAAG,CAAC6D,IAAI,CAACL,QAAQ,CAAC,CAAC,CAAC,EAAEvG,KAAK,CAACyI,IAAI,CAAC;AAExC;AACA,OAAO,MAAM5C,IAAI,GAAOe,IAAsB,IAAqCA,IAAI,CAACf,IAAI,EAAE;AAE9F;AACA,OAAO,MAAMM,OAAO,GAAOS,IAAsB,IAAkDA,IAAI,CAACT,OAAO,EAAE;AAEjH;AACA,OAAO,MAAMI,QAAQ,gBAAGtG,IAAI,CAG1B,CAAC,EAAE,CAAC2G,IAAI,EAAEJ,GAAG,KAAKI,IAAI,CAACL,QAAQ,CAACC,GAAG,CAAC,CAAC;AAEvC;AACA,OAAO,MAAMC,WAAW,gBAAGxG,IAAI,CAG7B,CAAC,EAAE,CAAC2G,IAAI,EAAEF,GAAG,EAAEF,GAAG,KAAKI,IAAI,CAACH,WAAW,CAACC,GAAG,EAAEF,GAAG,CAAC,CAAC;AAEpD;AACA,OAAO,MAAMkC,KAAK,gBAAGzI,IAAI,CAGvB,CAAC,EAAE,CAAC2G,IAAI,EAAE+B,CAAC,KAAK/B,IAAI,CAACH,WAAW,CAACkC,CAAC,EAAEA,CAAC,CAAC,CAAC;AAEzC;AACA;AACA;AAEA;AACA,OAAO,MAAMhB,oBAAoB,GAAGA,CAAA,KAA4B,IAAIiB,oBAAoB,EAAE;AAE1F;AACA,OAAO,MAAMf,gBAAgB,GAAGA,CAAA,KAA4B,IAAIgB,gBAAgB,EAAE;AAElF;AACA,OAAO,MAAMd,eAAe,GAAGA,CAAA,KAA4B,IAAIe,eAAe,EAAE;AAEhF;AACA,MAAMF,oBAAoB;EAA1BnH,YAAA;IACW,KAAAsH,EAAA,CAAqB,GAAG9H,qBAAqB;IAE7C,KAAA+H,OAAO,GAAG9I,YAAY,CAAC8H,SAAS,EAA4D;EA0FvG;EAxFEnF,WAAWA,CAAA;IACT,OAAO3C,YAAY,CAAC0C,MAAM,CAAC,IAAI,CAACoG,OAAO,CAAC;EAC1C;EAEA/F,QAAQA,CAAA;IACN,OAEE1C,IAAI,CAACuG,OAAO,CAAEmC,OAAO,IAGjB1I,IAAI,CAACuG,OAAO,CAAEkC,OAAO,IACnBxI,YAAY,CAACkD,0BAA0B,CAACsF,OAAO,EAAE,CAAC,CAAC7H,CAAC,EAAE4E,QAAQ,EAAEmD,UAAU,CAAC,KACzEA,UAAU,GAGN3I,IAAI,CAAC+C,MAAM,CADX/C,IAAI,CAACsD,qBAAqB,CAACkC,QAAQ,EAAEkD,OAAO,CAAC,IAG/C1I,IAAI,CAAC4I,IAAI,EAAE,KAAK,CAAC,CACtB,CATD5I,IAAI,CAACyD,IAAI,CAAC,MAAML,aAAa,CAAC,IAAI,CAACqF,OAAO,CAAC,CAAC,CAU7C,CACF,CAdDzI,IAAI,CAAC0I,OAAO;EAgBhB;EAEAlE,aAAaA,CACXE,QAAqB,EACrBvD,KAA4B,EAC5BC,MAA8D,EAC9DoC,UAA0C;IAE1C,OAAOxD,IAAI,CAAC4C,gBAAgB,CAAyBC,KAAK,IAAI;MAC5D,MAAM2C,QAAQ,GAAGxF,IAAI,CAACyF,kBAAkB,CAAiB5C,KAAK,CAACU,EAAE,EAAE,CAAC;MACpE,OAOEvD,IAAI,CAAC0F,WAAW,CAAC,MAAM1F,IAAI,CAACyD,IAAI,CAAC,MAAM,IAAI,CAACkC,YAAY,CAACH,QAAQ,CAAC,CAAC,CAAC,CANpExF,IAAI,CAAC8B,OAAO,CAAC,MAAK;QAChB,IAAI,CAAC+B,WAAW,CAACa,QAAQ,EAAEc,QAAQ,CAAC;QACpC,IAAI,CAACD,uBAAuB,CAACpE,KAAK,EAAEC,MAAM,CAAC;QAC3CkD,oBAAoB,CAAC,IAAI,EAAEnD,KAAK,EAAEC,MAAM,CAAC;QACzC,OAAOxB,UAAU,CAACsC,GAAG,CAACsB,UAAU,CAAC,GAAGxD,IAAI,CAACiC,SAAS,GAAGjC,IAAI,CAAC2D,aAAa,CAAC6B,QAAQ,CAAC;MACnF,CAAC,CAAC;IAGN,CAAC,CAAC;EACJ;EAEAD,uBAAuBA,CACrBpE,KAA4B,EAC5BC,MAA8D;IAE9D,IAAIyH,WAAW,GAAG,IAAI;IACtB,OAAOA,WAAW,KAAK1H,KAAK,CAACS,QAAQ,EAAE,KAAKkE,MAAM,CAACC,iBAAiB,IAAI5E,KAAK,CAACkB,MAAM,EAAE,GAAGlB,KAAK,CAACS,QAAQ,EAAE,CAAC,EAAE;MAC1G,MAAMkH,MAAM,GAAsBnJ,YAAY,CAACsE,IAAI,CAACtE,YAAY,CAACuE,iBAAiB,CAAC,CAA/D,IAAI,CAACuE,OAAO,CAAoD;MACpF,IAAIK,MAAM,KAAKnJ,YAAY,CAACuE,iBAAiB,EAAE;QAC7C2E,WAAW,GAAG,KAAK;OACpB,MAAM;QACL,MAAME,OAAO,GAAG5H,KAAK,CAACkD,KAAK,CAACyE,MAAM,CAAC,CAAC,CAAC,CAAC;QACtC,IAAIC,OAAO,IAAID,MAAM,CAAC,CAAC,CAAC,EAAE;UACxB3E,sBAAsB,CAAC2E,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;SACxC,MAAM,IAAI,CAACC,OAAO,EAAE;UACnBC,cAAc,CAAC,IAAI,CAACP,OAAO,EAAoChJ,KAAK,CAACwJ,OAAO,CAACH,MAAM,CAAC,CAAlD1F,aAAa,CAAC,IAAI,CAACqF,OAAO,CAAC,CAAwB,CAAC;;QAExFnE,oBAAoB,CAAC,IAAI,EAAEnD,KAAK,EAAEC,MAAM,CAAC;;;EAG/C;EAEAyC,WAAWA,CAACa,QAAqB,EAAEc,QAA2C;IAC5E,MAAM0D,QAAQ,GAAGxE,QAAQ,CAACtE,MAAM,CAAC8I,QAAQ,CAAC,EAAE;IAC5C,IAAIC,IAAI,GAAsBD,QAAQ,CAACC,IAAI,EAAE;IAC7C,IAAI,CAACA,IAAI,CAACC,IAAI,EAAE;MACd;MACA,OAAO,CAAC,EAAE;QACR,MAAMtF,KAAK,GAAGqF,IAAI,CAACrF,KAAK;QACxBqF,IAAI,GAAGD,QAAQ,CAACC,IAAI,EAAE;QACtB,IAAIA,IAAI,CAACC,IAAI,EAAE;UACMzJ,YAAY,CAAC0E,KAAK,CAAC,CAACP,KAAK,EAAE0B,QAAQ,EAAE,IAAe,CAAU,CAAC,CAA7E,IAAI,CAACiD,OAAO;UACjB;;QAEiB9I,YAAY,CAAC0E,KAAK,CAAC,CAACP,KAAK,EAAE0B,QAAQ,EAAE,KAAgB,CAAU,CAAC,CAA9E,IAAI,CAACiD,OAAO;;;EAGvB;EAEA9C,YAAYA,CAACH,QAA2C;IACtDwD,cAAc,CACZ,IAAI,CAACP,OAAO,EACsBhJ,KAAK,CAAC4J,MAAM,CAAC,CAAC,GAAGzI,CAAC,CAAC,KAAKA,CAAC,KAAK4E,QAAQ,CAAC,CAApEpC,aAAa,CAAC,IAAI,CAACqF,OAAO,CAAC,CAA0C,CAC3E;EACH;;KA3FUhI,mBAAmB;AA8F/B;AACA,MAAM6H,gBAAgB;EAAtBpH,YAAA;IACW,KAAAoI,EAAA,CAAqB,GAAG5I,qBAAqB;EAyBxD;EAvBE4B,WAAWA,CAAA;IACT,OAAO,CAAC;EACV;EAEAI,QAAQA,CAAA;IACN,OAAO1C,IAAI,CAAC4I,IAAI;EAClB;EAEApE,aAAaA,CACX+E,SAAsB,EACtBC,MAA6B,EAC7BC,OAA+D,EAC/DC,WAA2C;IAE3C,OAAO1J,IAAI,CAACuE,OAAO,CAAC,KAAK,CAAC;EAC5B;EAEAgB,uBAAuBA,CACrBiE,MAA6B,EAC7BC,OAA+D;IAE/D;EAAA;;KAvBQhJ,mBAAmB;AA2B/B;AACA,MAAM8H,eAAe;EAArBrH,YAAA;IACW,KAAAyI,EAAA,CAAqB,GAAGjJ,qBAAqB;EA2CxD;EAzCE4B,WAAWA,CAAA;IACT,OAAO,CAAC;EACV;EAEAI,QAAQA,CAAA;IACN,OAAO1C,IAAI,CAAC4I,IAAI;EAClB;EAEApE,aAAaA,CACXE,QAAqB,EACrBvD,KAA4B,EAC5BC,MAA8D,EAC9DsI,WAA2C;IAE3C,OAAO1J,IAAI,CAACyD,IAAI,CAAC,MAAK;MACpB,IAAI,CAACI,WAAW,CAAC1C,KAAK,EAAEuD,QAAQ,CAAC;MACjCJ,oBAAoB,CAAC,IAAI,EAAEnD,KAAK,EAAEC,MAAM,CAAC;MACzC,OAAO,IAAI;IACb,CAAC,CAAC;EACJ;EAEAmE,uBAAuBA,CACrBiE,MAA6B,EAC7BC,OAA+D;IAE/D;EAAA;EAGF5F,WAAWA,CAAC1C,KAA4B,EAAEuD,QAAqB;IAC7D,MAAMwE,QAAQ,GAAGxE,QAAQ,CAACtE,MAAM,CAAC8I,QAAQ,CAAC,EAAE;IAC5C,IAAIC,IAAuB;IAC3B,IAAIS,QAAQ,GAAG,IAAI;IACnB,OAAO,CAAC,CAACT,IAAI,GAAGD,QAAQ,CAACC,IAAI,EAAE,EAAEC,IAAI,IAAIQ,QAAQ,EAAE;MACjD,IAAIzI,KAAK,CAACS,QAAQ,EAAE,KAAK,CAAC,EAAE;QAC1B;;MAEF;MACAT,KAAK,CAAC8C,IAAI,CAACtE,YAAY,CAACuE,iBAAiB,CAAC;MAC1C0F,QAAQ,GAAGzI,KAAK,CAACkD,KAAK,CAAC8E,IAAI,CAACrF,KAAK,CAAC;;EAEtC;;KA1CUrD,mBAAmB;AA6C/B;AACA,MAAM0D,sBAAsB,GAAGA,CAAIqB,QAAqC,EAAEqE,CAAI,KAAU;EACtF,OAAO7J,IAAI,CAAC8J,kBAAkB,CAACtE,QAAQ,EAAExF,IAAI,CAACuE,OAAO,CAACsF,CAAC,CAAC,CAAC;AAC3D,CAAC;AAED;AACA,MAAMb,cAAc,GAAGA,CAAI7H,KAAmC,EAAE4I,EAAe,KAAoB;EACjG,OAAmBpK,YAAY,CAAC8E,QAAQ,CAACsF,EAAE,CAAC,CAAhC5I,KAAK;AACnB,CAAC;AAED;AACA,MAAMiC,aAAa,GAAOjC,KAAmC,IAAoB;EAC/E,OAAmBxB,YAAY,CAACkG,QAAQ,CAACC,MAAM,CAACC,iBAAiB,CAAC,CAAtD5E,KAAK;AACnB,CAAC;AAED;AACA,MAAM2D,WAAW,GAAGA,CAAI3D,KAAmC,EAAE8E,GAAW,KAAoB;EAC1F,OAAmBtG,YAAY,CAACkG,QAAQ,CAACI,GAAG,CAAC,CAAjC9E,KAAK;AACnB,CAAC;AAED;AACA,OAAO,MAAMwE,YAAY,GAAGA,CAAIxE,KAAmC,EAAE0I,CAAI,KAAU;EACjFb,cAAc,CACZ7H,KAAK,EACsB1B,KAAK,CAAC4J,MAAM,CAAE5C,CAAC,IAAKoD,CAAC,KAAKpD,CAAC,CAAC,CAAlDrD,aAAa,CAACjC,KAAK,CAAC,CAA+B,CACzD;AACH,CAAC;AAED;AACA,OAAO,MAAMmD,oBAAoB,GAAGA,CAClC/C,QAA2B,EAC3BJ,KAA4B,EAC5BC,MAA8D,KACtD;EACR;EACA,IAAIyH,WAAW,GAAG,IAAI;EACtB,OAAOA,WAAW,IAAI1H,KAAK,CAACkB,MAAM,EAAE,KAAK,CAAC,EAAE;IAC1C,MAAM2B,KAAK,GAAgBrE,YAAY,CAACsE,IAAI,CAACtE,YAAY,CAACuE,iBAAiB,CAAC,CAAzD9C,MAAM,CAAoD;IAC7E,IAAI4C,KAAK,KAAKrE,YAAY,CAACuE,iBAAiB,EAAE;MAC5C,MAAM+D,OAAO,GAAG9G,KAAK,CAAC8C,IAAI,CAACtE,YAAY,CAACuE,iBAAiB,CAAC;MAC1D,IAAI+D,OAAO,KAAKtI,YAAY,CAACuE,iBAAiB,EAAE;QAC9CC,sBAAsB,CAACH,KAAK,EAAEiE,OAAO,CAAC;QACtC1G,QAAQ,CAACgE,uBAAuB,CAACpE,KAAK,EAAEC,MAAM,CAAC;OAChD,MAAM;QACL4H,cAAc,CAAC5H,MAAM,EAA8B3B,KAAK,CAACwJ,OAAO,CAACjF,KAAK,CAAC,CAA3CZ,aAAa,CAAChC,MAAM,CAAC,CAAuB,CAAC;;MAE3EyH,WAAW,GAAG,IAAI;KACnB,MAAM;MACLA,WAAW,GAAG,KAAK;;;AAGzB,CAAC"}