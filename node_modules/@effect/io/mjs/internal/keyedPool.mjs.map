{"version":3,"file":"keyedPool.mjs","names":["Duration","Equal","dual","Hash","HashMap","MutableRef","Option","pipeArguments","Predicate","core","fiberRuntime","pool","KeyedPoolSymbolKey","KeyedPoolTypeId","Symbol","for","KeyedPoolMapValueSymbol","keyedPoolVariance","_K","_","_E","_A","KeyedPoolImpl","constructor","getOrCreatePool","activePools","_a","get","key","flatMap","invalidate","item","forEachSequentialDiscard","pipe","arguments","Complete","_tag","_b","symbol","combine","hash","string","u","isComplete","equals","isTagged","Pending","deferred","_c","isPending","makeImpl","min","max","timeToLive","map","context","fiberId","scope","suspend","value","getOrUndefined","undefined","uninterruptibleMask","restore","deferredUnsafeMake","previous","has","update","set","matchCauseEffect","onFailure","cause","current","remove","zipRight","deferredFailCause","failCause","onSuccess","as","deferredSucceed","scopeExtend","makeWithTTL","acquire","provideContext","getOrElse","infinity","succeed","deferredAwait","forEachSequential","Array","from","values","all","sync","make","empty","scopeMake","options","size","none","makeWith","decode","some","makeWithTTLBy","self"],"sources":["../../src/internal/keyedPool.ts"],"sourcesContent":[null],"mappings":"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"}