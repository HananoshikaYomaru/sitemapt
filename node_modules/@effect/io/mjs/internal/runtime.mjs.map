{"version":3,"file":"runtime.mjs","names":["Context","NodeInspectSymbol","toString","Option","pipeArguments","Predicate","Exit","Fiber","FiberId","FiberRefs","NoSuchElementException","InternalCause","core","FiberRuntime","fiberScope","OpCodes","runtimeFlags","_supervisor","_scheduler","unsafeFork","runtime","self","options","fiberId","unsafeMake","effect","fiberRefs","updatedAs","fiberRef","currentContext","value","context","scheduler","currentScheduler","updateRefs","fiberRuntime","forkAs","supervisor","none","onStart","addObserver","exit","onEnd","globalScope","add","start","unsafeRunCallback","onExit","id","onExitInterrupt","interruptAs","flatten","unsafeRunSync","result","unsafeRunSyncExit","_tag","fiberFailure","i0","asyncFiberException","fiber","limit","Error","stackTraceLimit","error","message","Object","defineProperties","name","get","isAsyncFiberException","u","isTagged","FiberFailureId","Symbol","for","FiberFailureCauseId","cause","prettyErrors","length","head","split","substring","stack","toJSON","_id","isFiberFailure","fastPath","op","exitFail","left","exitSucceed","right","SyncScheduler","flush","unsafePoll","unsafeRunPromise","unsafeRunPromiseExit","then","OP_SUCCESS","OP_FAILURE","Promise","resolve","RuntimeImpl","constructor","pipe","arguments","make","withFiberRuntime","state","status","succeed","getFiberRef","getFiberRefs","defaultRuntimeFlags","Interruption","CooperativeYielding","RuntimeMetrics","defaultRuntime","empty","unsafeRunEffect","unsafeForkEffect","unsafeRunPromiseEffect","unsafeRunPromiseExitEffect","unsafeRunSyncEffect","unsafeRunSyncExitEffect","asyncEffect","register","flatMap","deferredMake","deferred","uninterruptibleMask","restore","zipRight","fork","catchAllCause","cb","intoDeferred","deferredFailCause","deferredAwait"],"sources":["../../src/internal/runtime.ts"],"sourcesContent":[null],"mappings":"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"}